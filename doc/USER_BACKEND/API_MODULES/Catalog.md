# API Маршруты (Endpoints) модуля Catalog

В этом документе описаны маршруты API для работы с каталогом товаров.
Базовый префикс для всех маршрутов: `/api/v1/catalog`.

## Категории (Categories)

### `GET /categories/`
*   **Описание**: Получение дерева категорий.
*   **Ответ**: Список объектов `CategoryTree` (иерархическая структура).
*   **Обоснование реализации**:
    *   Возвращается готовое дерево для удобства отображения на фронтенде.
    *   Дерево строится вручную (`backend/crud/crud_catalog.py`), а не через рекурсивную валидацию Pydantic, чтобы избежать `RecursionError` при работе с ORM-объектами SQLAlchemy.

## Товары (Products)

### `GET /products`
*   **Описание**: Получение списка товаров с пагинацией и фильтрацией.
*   **Параметры запроса**:
    *   `page` (int, default=1): Номер страницы (начиная с 1).
    *   `limit` (int, default=20, max=100): Количество товаров на странице.
    *   `category_id` (int, optional): Фильтр по категории.
    *   `tea_type` (string, optional): Фильтр по типу чая.
    *   `sort` (string, optional): Сортировка (например, `price_asc`, `price_desc`).
    *   `q` (string, optional): Поисковый запрос по названию.
*   **Ответ**: Объект `ProductListResponse`:
    *   `items`: Список объектов `Product`.
    *   `total`: Общее количество товаров.
    *   `page`: Текущая страница.
    *   `pages`: Общее количество страниц.
*   Каждый объект `Product` содержит:
    *   Стандартные поля товара.
    *   `views_count`: Количество просмотров.
    *   `likes_count`: Количество лайков.
    *   `comments_count`: Количество комментариев.
    *   `is_liked`: (bool) Лайкнул ли текущий пользователь/клиент этот товар.

### `GET /products/{slug}`
*   **Описание**: Получение детальной информации о товаре по slug.
*   **Параметры**: `slug` (String) — ЧПУ товара.
*   **Ответ**: Объект `ProductDetail` со списком SKU.
*   **Ошибки**: `404 Not Found` — Товар не найден.

## SKU (Stock Keeping Units)

### `GET /skus/{sku_id}`
*   **Описание**: Получение информации о конкретном торговом предложении (вариации товара).
*   **Параметры**: `sku_id` (Integer).
*   **Ответ**: Объект `SKU` с текущим остатком (`quantity`).
